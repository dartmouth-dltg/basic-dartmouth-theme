<?php
$escape = $this->plugin('escapeHtml');
$siteTitle = $site->title();
$this->htmlElement('html')->setAttribute('lang', $this->lang());
$this->headMeta()->setCharset('utf-8');
$this->headMeta()->appendName('viewport', 'width=device-width, initial-scale=1');
$this->headTitle($siteTitle)->setSeparator(' Â· ');
$this->headTitle()->append($this->setting('installation_title', 'Omeka S'));
$this->headLink()->prependStylesheet($this->assetUrl('css/style.css'));
$this->headLink()->prependStylesheet($this->assetUrl('css/iconfonts.css', 'Omeka'));
$this->headLink()->prependStylesheet('//fonts.googleapis.com/css?family=Lora:400,700');
$this->headLink()->appendStylesheet($this->assetUrl('../node_modules/@accessible360/accessible-slick/slick/accessible-slick-theme.min.css'));
$this->headLink()->appendStylesheet($this->assetUrl('../node_modules/@accessible360/accessible-slick/slick/slick.min.css'));
$this->headScript()->appendFile($this->assetUrl('../node_modules/@accessible360/accessible-slick/slick/slick.min.js'));$this->jsTranslate();
$this->headLink()->appendStylesheet($this->assetUrl('../node_modules/@midzer/tobii/dist/tobii.min.css'));
$this->headScript()->appendFile($this->assetUrl('../node_modules/@midzer/tobii/dist/tobii.min.js'));$this->jsTranslate();
$this->headScript()->appendFile('https://cdnjs.cloudflare.com/ajax/libs/uuid/8.1.0/uuidv4.min.js');$this->jsTranslate();
$this->headScript()->prependFile($this->assetUrl('js/autolink.js'));
$this->headScript()->prependFile($this->assetUrl('js/default.js'));
$this->headScript()->prependFile($this->assetUrl('js/global.js', 'Omeka'));
$this->headScript()->prependFile($this->assetUrl('vendor/jquery/jquery.min.js', 'Omeka'));
$this->trigger('view.layout');
$userBar = $this->userBar();
?>
<?php echo $this->doctype(); ?>
<?php echo $this->htmlElement('html'); ?>
    <head>
        <?php echo $this->headMeta(); ?>
        <?php echo $this->headTitle(); ?>
        <?php echo $this->headLink(); ?>
        <?php echo $this->headStyle(); ?>
        <?php echo $this->headScript(); ?>
        
        <style>
            <?php if ($accentColor = $this->themeSetting('accent_color')): ?>
            a:link,
            a:visited {
                color: <?php echo $accentColor; ?>
            }
            
            a:active,
            a:hover {
                color: <?php echo $accentColor; ?>;
                opacity: .75;
            }
            <?php endif; ?>
        </style>
    </head>

    <?php echo $this->htmlElement('body'); ?>
        <a id="skipnav" href="#content"><?php echo $this->translate('Skip to main content'); ?></a>
        <?php echo $userBar; ?>
        <div class="page-wrapper">
            <header>
                <div>
                    <h1>
                        <a href="<?php echo $site->url(); ?>" class="site-title">
                            <img src="<?php echo $this->assetUrl('img/dartmouth-library-logo-square.png') ?>" alt="Dartmouth Library logo" />
                            <span><?php echo $escape($siteTitle); ?></span>
                        </a>
                    </h1>
                </div>      
            </header>
            <?php if ($this->themeSetting('use_harmful_content') == 1 && $harmfulContent = $this->themeSetting('harmful_content')): ?>
                <div class="harmful-content-wrapper">
                    <?php echo $harmfulContent; ?>
                </div>
            <?php endif; ?>
            <?php $content_class = $this->themeSetting('use_for_site_list') == 1 ? 'used-for-site-promo' : 'not-used-for-site-promo'; ?>
            <div id="content" role="main" class="<?php echo $content_class; ?>">
                <?php echo $this->content; ?>
            </div>
            <footer>
                <div>
                    <div class="admin-link">
                        <a href="<?php echo implode('/', array_diff(explode("/", $site->adminUrl()),['site','s',$site->slug()])); ?>">Omeka-S Login</a>
                    </div>
                </div>
            </footer>
        </div>
    </body>
</html>
